<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Resource Override Plus</title>

        <!-- Data templates import util -->
        <script src="scripts/templates-import.js"></script>

        <!-- Data templates import -->
        <link rel="import" type="text/html" href="resources/templates/part-templates.html" id="part-templates-import">
        <link rel="import" type="text/html" href="resources/templates/ui-rules-templates.html" id="rules-templates-import">
        <link rel="import" type="text/html" href="resources/templates/ui-domains-templates.html" id="domain-templates-import">

        <!-- KnockoutJS MVVM library -->
        <script src="libraries/knockoutJS/knockout-min.js"></script>

        <!-- KnockoutJS CSP issue solution -->
        <script src="libraries/knockout-secure-binding/knockout-secure-binding-min.js"></script>

        <!-- CodeMirror 5 embedded editor -->
        <script src="libraries/codemirror5/lib/codemirror.js"></script>
        <link rel="stylesheet" type="text/css" href="libraries/codemirror5/lib/codemirror.css">
        <script src="libraries/codemirror5/mode/css/css.js"></script>
        <script src="libraries/codemirror5/mode/javascript/javascript.js"></script>
        <script src="libraries/codemirror5/mode/xml/xml.js"></script>

        <!-- CodeMirror 5 KnockoutJS handler. Thx to https://stackoverflow.com/a/33966345 -->
        <script src="libraries/codemirror5/knockout-integration.js"></script>

        <link id="theme-colour-palette" rel="stylesheet" type="text/css" href="css/colours/dark.css">
        <link id="codemirror-theme" rel="stylesheet" type="text/css" href="libraries/codemirror5/theme/material-ocean.css">
        <link id="theme-styles" rel="stylesheet" type="text/css" href="css/styles.css">

        <link rel="stylesheet" type="text/css" href="css/icons.css">
        <link rel="stylesheet" type="text/css" href="css/options/side-layout.css">
        <link rel="stylesheet" type="text/css" href="css/options/main-content-layout.css">
    </head>
    <body>
        <div id="ui-layout-main">
            <!-- Left side layout contents -->
            <div id="ui-side-drawer-root" data-bind="css: { 'ui-narrow-view': isNarrowSight }">
                <div id="ui-side-drawer">
                    <div id="ui-side-header">
                        <div id="ui-side-header-title">
                            <p>Resource</p>
                            <p>Override</p>
                        </div>
                    </div>

                    <div id="ui-side-tabs">
                        <div id="ui-tabs-container"
                             data-bind="template: {name: 'ui-side-tab-template', foreach: tabs}">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main layout content -->
            <div id="ui-main-content-root">
                <div id="ui-main-content">
                    <div id="ui-page-loading"
                         style="display: block;"
                         data-bind="visible: isSuccess == undefined">
                        <div>Please wait, page is loading...</div>
                    </div>

                    <!-- Show error message if noscript active -->
                    <noscript>
                        <h2>Oops :(</h2>
                        <div>Something impossible happened lol</div>
                        <div>Your browser seems like rejected JavaScript from extension, which shouldn't be happen!!!</div>
                        <div>But your browser might be chrome-like too, you can try to submit issue about this to my repository</div>
                        <div>Thanks!</div>
                        <a href="https://github.com/appleneko2001/ResourceOverridePlus/issues/new">
                            <p>Submit a new issue to repository</p>
                        </a>

                        <p>PLZ DON'T FORGET TELL ME WHICH BROWSER YOU USE, VERSION OF BROWSER</p>
                        <p>AND VERSION OF RESOURCE OVERRIDE EXTENSION !!!!</p>
                    </noscript>

                    <!-- Show error message if KnockoutJS fail (view model might fail mostly, the lib itself is pretty good though) -->
                    <div style="display: none;"
                         data-bind="visible: isSuccess == false">
                        <h2>Oops :(</h2>
                        <div>Something impossible happened lol</div>
                        <div>Extension view model couldn't be loaded!!! HOW?!</div>

                        <div>You can try to submit issue about this to my repository if you can't solve it by yourself or you wanna improve it</div>
                        <div>Thanks!</div>
                        <a href="https://github.com/appleneko2001/ResourceOverridePlus/issues/new">
                            <p>Submit a new issue to repository</p>
                        </a>

                        <p>PLZ DON'T FORGET TELL ME WHICH BROWSER YOU USE, VERSION OF BROWSER</p>
                        <p>AND VERSION OF RESOURCE OVERRIDE EXTENSION !!!!</p>

                        <h4>Error message</h4>
                        <div data-bind="text: message"></div>

                        <h4>Stacktrace</h4>
                        <div data-bind="text: stack"></div>
                    </div>

                    <div id="ui-tab-content"
                         style="display: none;"
                         data-bind="visible: isSuccess == true">

                        <!-- Home tab -->
                        <div id="ui-page-home"
                             class="ui-invisible">
                            <div class="ui-content-group-warn">
                                <div class="ui-content-title">Disclaimer</div>
                                <div>
                                    <span>Please <b>use it at your own risk and responsibility</b> to what did you do with our extension!</span>
                                    <span>It used for correct frontend scripts, styles and some personal customizations,</span>
                                    <span><b>not for abuse and "hacking" or making "fake" things on their sites !</b></span>
                                    <div><b>If you can't take responsibility</b>, then <b>do not use this extension !</b></div>
                                </div>
                            </div>
                            <div class="ui-content-group">
                                <div class="ui-content-title">Welcome to ResourceOverridePlus!</div>
                                <div class="ui-content-subtitle">a enhanced version of Resource Override</div>
                                <div>
                                    <span>Resource Override is an extension to help you gain full control of any website by redirecting traffic, replacing, editing, or inserting new content.</span>
                                    <span>Basically, you can use Resource Override to replace script, style-sheet and image by some simple rules.</span>
                                </div>
                            </div>
                            <div class="ui-content-group">
                                <div class="ui-content-subtitle">Getting started</div>
                                <div>
                                    <span>To use this extension, you should have one or more domain ruleset, and make sure they are enabled.</span>
                                    <span>To add domain rule, you need to press "Domains" tab from left side first.</span>
                                    <span>Then add a domain by click "Add a domain" button, and then add operation rules to let it works.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Domains tab -->
                        <div id="ui-page-domains"
                             class="ui-invisible">
                            <div class="ui-content-title">Domains and rules</div>
                            <div class="ui-separator"></div>
                            <div class="ui-spacing"></div>
                            <div id="ui-domains-listing"
                                 data-bind="template: { name: 'domain-ruleset-template',
                                    foreach: domains, visible: domains().length > 0 }">
                            </div>

                            <div id="ui-domains-placeholder"
                                 class="ui-items-placeholder"
                                 data-bind="template: { name: 'ui-domains-placeholder' }, visible: domains().length == 0">

                            </div>

                            <div class="ui-spacing"></div>

                            <a href="#"
                               id="ui-domains-create"
                               class="ui-items-create ui-button"
                               data-bind="click: createDomainRuleset, visible: isCreatingRuleset == false">
                                <div>
                                    <div>Add a domain</div>
                                </div>
                            </a>

                            <div class="ui-items-create"
                                 data-bind="template: { name: 'domain-ruleset-template',
                             if: isCreatingRuleset, data: rulesetCreation }, visible: isCreatingRuleset">

                            </div>
                        </div>

                        <!-- Settings tab -->
                        <div id="ui-page-settings" class="ui-invisible">
                            <div class="ui-content-title">Settings</div>
                            <div class="ui-separator"></div>
                            <div class="ui-spacing"></div>

                            <div class="ui-content-group">
                                <div class="ui-content-subtitle">Appearance - options</div>
                                <label class="ui-flexbox">
                                    <span class="ui-v-center">Theme</span>
                                    <select class="ui-flex-fill" data-bind="options: themes, optionsText: 'name',
                                        optionsValue: 'id', value: selectedTheme"></select>
                                </label>
                                <label class="ui-flexbox">
                                    <span class="ui-v-center">Prefer narrow sidebar</span>
                                    <input type="checkbox" data-bind="checked: isPreferNarrowSideBar">
                                </label>
                            </div>

                            <div class="ui-content-group">
                                <div class="ui-content-subtitle">Import and export settings</div>

                                <div class="ui-flexbox">
                                    <a class="ui-flex-fill ui-button-outline" href="#"
                                       data-bind="click: importV1OptionsCommand">
                                        <div>Import (old version)</div>
                                    </a>
                                    <a class="ui-flex-fill ui-button-outline" href="#"
                                       data-bind="click: loadOptionsCommand">
                                        <div>Import</div>
                                    </a>
                                    <a class="ui-flex-fill ui-button-outline" href="#"
                                       data-bind="click: exportOptionsCommand">
                                        <div>Export</div>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Help tab -->
                        <div id="ui-page-help" class="ui-invisible">
                            <div class="ui-content-title">Help x About</div>
                            <div class="ui-separator"></div>
                            <div class="ui-spacing"></div>

                            <div class="ui-content-subtitle">Known issues</div>
                            <div>
                                <span>URL to URL rule action not always working as expected.</span>
                                <span>If you want re-direct such thing like JavaScript, CSS (Style sheet), Image or etc.,</span>
                                <span>you may use HTML Element attribute replace on preload instead.</span>
                            </div>

                            <div class="ui-content-subtitle">About</div>

                            <div>
                                <span>ResourceOverridePlus is a</span>
                                <a href="https://en.wikipedia.org/wiki/Free_and_open-source_software">free and open-source software.</a>
                            </div>
                            <span>It means you are able to use, study this extension for free.</span>
                            <span>Also you are able to modify, contribute this extension to make this extension more powerful and stable!</span>
                            <span>You can visit to our GitHub Repository freely!</span>
                            <a class="ui-link-block" href="https://github.com/appleneko2001/ResourceOverridePlus">ResourceOverridePlus Repository</a>
                            <a class="ui-link-block" href="https://github.com/kylepaulsen/ResourceOverride">ResourceOverride Repository</a>

                            <div class="ui-spacing"></div>

                            <div>We using those third-party feature library in this extension:</div>

                            <ul data-bind="template: { name: 'ui-third-party-lib-info', foreach: thirdPartyLibs }">

                            </ul>
                            <div class="ui-spacing"></div>

                            <div>Options UI design is inspired by AdBlockPlus Options UI</div>
                            <span>ResourceOverridePlus is my personal rework project, based on</span>
                            <a href="https://github.com/kylepaulsen/ResourceOverride">ResourceOverride by Kyle Paulsen</a>
                            <span>project and do some enhancements on features,</span>
                            <span>also the UI will be refreshed to make it looks more modern and understandable.</span>


                        </div>
                    </div>
                </div>
            </div>

            <div class="ui-toast-overlay"
                 data-bind="template: { name: 'ui-toast-message-template',  foreach: toasts }">
            </div>
        </div>

        <script src="scripts/enums.js"></script>
        <script src="scripts/util.js"></script>
        <script src="scripts/options-main.js"></script>
    </body>
</html>
